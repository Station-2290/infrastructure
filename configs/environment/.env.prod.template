# Station2290 Production Environment Configuration
# Copy this file to .env.prod and configure all values

# =============================================================================
# SECURITY WARNING
# =============================================================================
# This file contains sensitive configuration data.
# - Never commit this file to version control
# - Keep it secure and limit access
# - Use strong, unique passwords and secrets
# - Rotate secrets regularly
# =============================================================================

# =============================================================================
# GENERAL CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=production

# Application URLs
MAIN_DOMAIN=station2290.ru
API_DOMAIN=api.station2290.ru
ADMINKA_DOMAIN=adminka.station2290.ru
ORDERS_DOMAIN=orders.station2290.ru
BOT_DOMAIN=bot.station2290.ru
MONITORING_DOMAIN=monitoring.station2290.ru

# CORS Configuration
CORS_ORIGIN=https://station2290.ru,https://api.station2290.ru,https://orders.station2290.ru,https://adminka.station2290.ru

# Logging
LOG_LEVEL=info

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database
POSTGRES_DB=station2290
POSTGRES_USER=station2290_user
POSTGRES_PASSWORD=change-this-super-strong-password-123456789
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Database URL (constructed from above variables)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Redis Cache
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=
REDIS_TTL=3600

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET=change-this-jwt-secret-key-with-at-least-32-characters-long
JWT_REFRESH_SECRET=change-this-jwt-refresh-secret-key-with-at-least-32-characters-long
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# NextAuth Configuration (for web app)
NEXTAUTH_SECRET=change-this-nextauth-secret-with-at-least-32-characters
NEXTAUTH_URL=https://station2290.ru

# API Keys
COFFEE_SHOP_API_KEY=your-coffee-shop-api-key-here

# =============================================================================
# WHATSAPP BUSINESS API CONFIGURATION
# =============================================================================

# WhatsApp Business API
WHATSAPP_BUSINESS_API_URL=https://graph.facebook.com/v17.0
WHATSAPP_BUSINESS_ACCOUNT_ID=your-whatsapp-business-account-id
WHATSAPP_PHONE_NUMBER_ID=your-whatsapp-phone-number-id
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token-change-this

# =============================================================================
# AI SERVICES CONFIGURATION
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# Text-to-Speech Configuration
TTS_ENABLED=false
TTS_MODEL_ID=onnx-community/Kokoro-82M-v1.0-ONNX
TTS_DTYPE=q8
TTS_DEVICE=cpu

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@station2290.ru

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================

# SSL Certificate Configuration
SSL_DOMAINS=station2290.ru,www.station2290.ru,api.station2290.ru,adminka.station2290.ru,orders.station2290.ru,bot.station2290.ru
SSL_EMAIL=admin@station2290.ru
SSL_STAGING=false
SSL_FORCE_RENEWAL=false

# =============================================================================
# RATE LIMITING
# =============================================================================

# API Rate Limiting
API_RATE_LIMIT=100
API_RATE_WINDOW=900
BOT_RATE_LIMIT=2
BOT_RATE_WINDOW=60

# =============================================================================
# FILE UPLOADS
# =============================================================================

# Upload Configuration
UPLOAD_MAX_SIZE=50MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp,audio/mpeg,audio/wav,audio/ogg
UPLOAD_PATH=/app/uploads

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Grafana Configuration
GRAFANA_ADMIN_PASSWORD=change-this-grafana-admin-password
GRAFANA_SECRET_KEY=change-this-grafana-secret-key

# Prometheus Configuration
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_SCRAPE_INTERVAL=15s

# Loki Configuration
LOKI_RETENTION_PERIOD=720h

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Backup Settings
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key-change-this

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Slack Notifications (optional)
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#alerts

# Email Notifications
ALERT_EMAIL=admin@station2290.ru

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================

# Service Versions
API_VERSION=latest
BOT_VERSION=latest
WEB_VERSION=latest
ADMINKA_VERSION=latest
ORDER_PANEL_VERSION=latest

# Build Contexts (for Docker Compose)
API_BUILD_CONTEXT=../../../api
BOT_BUILD_CONTEXT=../../../bot
WEB_BUILD_CONTEXT=../../../web
ADMINKA_BUILD_CONTEXT=../../../adminka
ORDER_PANEL_BUILD_CONTEXT=../../../order-panel

# Source Paths (for development)
API_SOURCE_PATH=../../../api
BOT_SOURCE_PATH=../../../bot
WEB_SOURCE_PATH=../../../web
ADMINKA_SOURCE_PATH=../../../adminka
ORDER_PANEL_SOURCE_PATH=../../../order-panel

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Node.js Configuration
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=128

# Database Connection Pooling
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_ACQUIRE_TIMEOUT=60000
DB_POOL_IDLE_TIMEOUT=10000

# Redis Connection Pooling
REDIS_POOL_MIN=2
REDIS_POOL_MAX=10

# =============================================================================
# DEVELOPMENT/DEBUG (disable in production)
# =============================================================================

# Debug Configuration (set to false in production)
DEBUG=false
HOT_RELOAD=false
ENABLE_PROFILING=false
ENABLE_DEBUG_LOGS=false

# Testing Configuration
TEST_DATABASE_URL=
TEST_REDIS_URL=

# =============================================================================
# ADDITIONAL ENVIRONMENT VARIABLES
# =============================================================================

# Add any additional service-specific environment variables here

# Analytics/Tracking (optional)
GOOGLE_ANALYTICS_ID=
YANDEX_METRICA_ID=

# Payment Integration (if applicable)
PAYMENT_PROVIDER_API_KEY=
PAYMENT_WEBHOOK_SECRET=

# SMS Integration (if applicable)
SMS_PROVIDER_API_KEY=
SMS_SENDER_NAME=Station2290

# =============================================================================
# VALIDATION NOTES
# =============================================================================
# 
# Required Variables (must be changed from defaults):
# - POSTGRES_PASSWORD
# - JWT_SECRET
# - JWT_REFRESH_SECRET
# - NEXTAUTH_SECRET
# - WHATSAPP_ACCESS_TOKEN
# - WHATSAPP_WEBHOOK_VERIFY_TOKEN
# - OPENAI_API_KEY (if using AI features)
# - SSL_EMAIL
# - GRAFANA_ADMIN_PASSWORD
# 
# Optional Variables (configure as needed):
# - SMTP_* (for email functionality)
# - SLACK_WEBHOOK_URL (for notifications)
# - TTS_* (for text-to-speech features)
# - Analytics IDs (for tracking)
# 
# =============================================================================